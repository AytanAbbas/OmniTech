#pragma checksum "D:\Project\Omnitech\Omnitech\Views\KN\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "679fa345e8e0c802b3468ab4518e285d1759380c"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(Omnitech.Models.KN.Views_KN_Index), @"mvc.1.0.view", @"/Views/KN/Index.cshtml")]
namespace Omnitech.Models.KN
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "D:\Project\Omnitech\Omnitech\Views\_ViewImports.cshtml"
using Omnitech;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Project\Omnitech\Omnitech\Views\_ViewImports.cshtml"
using DevExtreme.AspNet.Mvc;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "D:\Project\Omnitech\Omnitech\Views\KN\Index.cshtml"
using Omnitech.Dtos;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Project\Omnitech\Omnitech\Views\KN\Index.cshtml"
using Omnitech.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"679fa345e8e0c802b3468ab4518e285d1759380c", @"/Views/KN/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"a176c098ad34cf0c9d5df9c28d487640da3cad4f", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_KN_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<KNInvoiceDto>
    #nullable disable
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("rel", new global::Microsoft.AspNetCore.Html.HtmlString("stylesheet"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("href", new global::Microsoft.AspNetCore.Html.HtmlString("~/css/modal.css"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("href", new global::Microsoft.AspNetCore.Html.HtmlString("~/css/Site.css"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("name", "_KNInvoiceInfoPartial", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("name", "_KNInvoiceDetailPartial", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 4 "D:\Project\Omnitech\Omnitech\Views\KN\Index.cshtml"
  
    ViewData["Title"] = "Index";

#line default
#line hidden
#nullable disable
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("link", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "679fa345e8e0c802b3468ab4518e285d1759380c5324", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("link", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "679fa345e8e0c802b3468ab4518e285d1759380c6438", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"

<h2 id=""title"">Fakturalar</h2>

<input type=""date"" id=""knStartDate"" style="" color: #337ab7;"">
<span id=""symbol"">>></span>
<input type=""date"" id=""knEndDate"" style="" color: #337ab7;"">
<input type=""button"" value=""axtar"" id=""btnKNSearch"" style=""color: white ;background: #337ab7;border: #337ab7;width: 6%;height: 30px;font-weight: bold;"" />


<div id=""knInvoiceInfos"">
    ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("partial", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "679fa345e8e0c802b3468ab4518e285d1759380c7957", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper.Name = (string)__tagHelperAttribute_3.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_3);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
</div>


<div class=""menu-modal"" id=""modal"">
    <div style=""display:block; text-align:right;"">
        <span id=""btn_close"" class=""close-button""> &times;</span>
    </div>
    <div>
        <label for=""fname""> Çap ediləcək məbləğ:</label>
        <input id=""sum_for_print"" style=""width:7%;   margin-right: 5%;"" />
        <label for=""fname""> Faktura məbləği:</label>
        <input id=""invAmount"" style=""width:7%;   margin-right: 5%;"" disabled />
        <label for=""fname"">Çap edilmiş məbləğ:</label>
        <input id=""printedAmount"" style=""width:7%;  margin-right: 5%;"" disabled />
        <label for=""fname""> Fərq:</label>
        <input id=""difference"" style=""width:7%; margin-right: 3%;"" disabled />
        <button id=""confirm"" class=""btn btn-primary "" style=""background-color: #337ab7 !important;border-color: #337ab7;}"">
            Təsdiqlə
        </button>
    </div>
    <div id=""knInvoiceDetails"">
        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("partial", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "679fa345e8e0c802b3468ab4518e285d1759380c10056", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper.Name = (string)__tagHelperAttribute_4.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_4);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
    </div>
    <div class=""print"">
        <label style=""margin-left: 20px; margin-right: 10px;position: relative;top: 30px;"">Sətir sayı :</label>
        <input id=""resept_count"" type=""text"" value=""10"" style=""    width: 45px;position: relative;top: 30px;right: 11px;"">
        <button id=""btnPrint"" class=""btn btn-primary col-12"">Cap et</button>
    </div>
</div>

<div id=""overlay""");
            BeginWriteAttribute("class", " class=\"", 2006, "\"", 2014, 0);
            EndWriteAttribute();
            WriteLiteral(@"></div>



<script>
  
    let selectedKNInvoiceInfo;

    let overlay = document.getElementById(""overlay"");
    let modall = document.getElementById(""modal"");
    let btnKNSearch = document.getElementById(""btnKNSearch"");
    let btnPrint = document.getElementById(""btnPrint"");

    let btn_close = document.getElementById(""btn_close"");
    let btnConfirm = document.getElementById(""confirm"");
    let knInvoiceDetails = document.getElementById(""knInvoiceDetails"");
    let invAmount_ = document.getElementById(""invAmount"");
    let printedAmount_ = document.getElementById(""printedAmount"");
    let difference_ = document.getElementById(""difference"");
    let sum_for_print = document.getElementById(""sum_for_print"");


    let currentDate = new Date().toISOString().slice(0, 10)
    document.getElementById(""knStartDate"").value = currentDate;
    document.getElementById(""knEndDate"").value = currentDate;
    btnKNSearch.addEventListener(""click"", getKnInvoiceInfos);

    btnConfirm.addEventList");
            WriteLiteral(@"ener(""click"", function () {
        let invId = selectedKNInvoiceInfo[0].INV_ID;
        let invAmount = document.getElementById(""sum_for_print"").value;
        let printedAmount = selectedKNInvoiceInfo[0].CAP_EDILMIS_MEBLEG;
        //let difference = invAmount - printedAmount
        getKNInvoiceDetailsByInvIdAndMebleg(invId, invAmount, difference_.value);
    });

    btnPrint.addEventListener(""click"", function () {
        let invId = selectedKNInvoiceInfo[0].INV_ID;
        let invAmount = document.getElementById(""sum_for_print"").value;
        let faktura = selectedKNInvoiceInfo[0].FAKTURANO;
        let difference = difference_.value

        printKNInvoiceDetails(invId, invAmount, difference, faktura);
  


    });

    hideInvoiceDetailModal(btn_close);
    hideInvoiceDetailModal(overlay);


    function getKnInvoiceInfos() {

        let knStartDate = document.getElementById(""knStartDate"");
        let knEndDate = document.getElementById(""knEndDate"");

        $.ajax({
");
            WriteLiteral(@"            url: ""/KN/GetByStartDateAndEndDate"",
            method: ""GET"",
            data: { startDate: knStartDate.value, endDate: knEndDate.value },
            success: function (res) {
                if (res.status == 500) {
                    alert(res.responseText);
                }

                else
                    $(""#knInvoiceInfos"").html(res);

            },
            error: function (res) {
                alert(res.responseText);
            }
        });
    }

    function kn_inv_info_selection_changed(selectedItems) {
        selectedKNInvoiceInfo = selectedItems.selectedRowsData;
    }

    function selectKNInvoiceInfo(e) {
        if (!e.itemData.KNInvoiceInfos) {
            let invId = selectedKNInvoiceInfo[0].INV_ID;
            let invAmount = selectedKNInvoiceInfo[0].FAKTURA_MEBLEGI;
            let printedAmount = selectedKNInvoiceInfo[0].CAP_EDILMIS_MEBLEG.toFixed(6);
            let difference = (invAmount - printedAmount).toFixed(6);
     ");
            WriteLiteral(@"       sum_for_print.value = difference;

            invAmount_.value = invAmount;
            printedAmount_.value = printedAmount;
            difference_.value = difference;

            //if (invAmount == printedAmount) {
            //        Swal.fire({
            //            icon: 'warning',
            //            title: 'Bu qəbz artıq kassaya göndərilib',
            //        });
            //}

            //else{
            getKNInvoiceDetailsByInvIdAndMebleg(invId, printedAmount, difference);
            //knInvoiceDetails.style.display = ""none"";
            showInvoiceDetailModal();
            //}
           

        }
    }

    function printKNInvoiceDetails(invId, invTotalSum, difference, faktura) {


        $.ajax({
            url: ""/KNInvoicePrint/Index"",
            method: ""GET"",
            data: { invId: invId, mebleg: invTotalSum, difference: difference, faktura: faktura },
            success: function (res) {
                if (res.status =");
            WriteLiteral(@"= 500) {
                    Swal.fire({
                        icon: 'error',
                        title: res.responseText,
                    });
                  //  alert(res.responseText);
                }

                else {
                    $(""#knInvoiceDetails"").html(res);

                    printedAmount_.value = document.getElementById(""printed_amount_from_db"").value;
                    difference_.value = document.getElementById(""difference_from_db"").value;
                    sum_for_print.value = 0;

                    knInvoiceDetails.style.display = ""block"";


                    Swal.fire({
                        icon: 'success',
                        title: res.responseText,
                    });

                }
            },
            error: function (res) {
                alert(res.responseText);
            }
        });


    }

    function getKNInvoiceDetailsByInvIdAndMebleg(invId, mebleg, difference) {



        $.ajax");
            WriteLiteral(@"({
            url: ""/KN/GetKNInvoiceDetailsByInvIdAndMebleg"",
            method: ""GET"",
            data: { invId: invId, mebleg: sum_for_print.value, difference: difference },
            success: function (res) {
                if (res.status == 500) {
                    alert(res.responseText);
                }

                else {
                    $(""#knInvoiceDetails"").html(res);
                    knInvoiceDetails.style.display = ""block"";
                }
            },
            error: function (res) {
                alert(res.responseText);
            }
        });

    }


    function showInvoiceDetailModal() {
        modall.classList.add(""active"");
        overlay.classList.add(""active"");

    }

    function hideInvoiceDetailModal(btn) {
        btn.addEventListener(""click"", function () {
            overlay.classList.remove(""active"")
            modall.classList.remove(""active"")
            //getKnInvoiceInfos();
          
        });

    }");
            WriteLiteral("\n\r\n\r\n\r\n</script>\r\n\r\n");
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<KNInvoiceDto> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
